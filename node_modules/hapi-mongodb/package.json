{
  "name": "hapi-mongodb",
  "version": "3.0.0",
  "description": "A simple Hapi MongoDB connection plugin.",
  "main": "lib/index.js",
  "scripts": {
    "test": "lab -M 5000 -t 100 -a code -L"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/Marsup/hapi-mongodb.git"
  },
  "keywords": [
    "hapi",
    "mongodb"
  ],
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/Marsup/hapi-mongodb/issues"
  },
  "dependencies": {
    "async": "^0.9.0",
    "joi": "^6.0.8",
    "mongodb": "^2.0.25"
  },
  "devDependencies": {
    "code": "^1.2.1",
    "hapi": ">= 6.1.x",
    "lab": "^5.1.0"
  },
  "peerDependencies": {
    "hapi": ">= 6.1.x"
  },
  "readme": "[![npm version](https://badge.fury.io/js/hapi-mongodb.svg)](http://badge.fury.io/js/hapi-mongodb)\n[![Build Status](https://secure.travis-ci.org/Marsup/hapi-mongodb.svg)](http://travis-ci.org/Marsup/hapi-mongodb)\n[![Dependencies Status](https://david-dm.org/Marsup/hapi-mongodb.svg)](https://david-dm.org/Marsup/hapi-mongodb)\n[![DevDependencies Status](https://david-dm.org/Marsup/hapi-mongodb/dev-status.svg)](https://david-dm.org/Marsup/hapi-mongodb#info=devDependencies)\n\n# Hapi-MongoDB\n\nThis is a plugin to share a common MongoDB connection pool across the whole Hapi server.\n\nOptions can be a single object with the following keys or an array of the same kind if you need multiple connections :\n\n- url: *Optional.* MongoDB connection string (eg. `mongodb://user:pass@localhost:27017`),\n    - defaults to `mongodb://localhost:27017`\n- settings: *Optional.* Provide extra settings to the connection, see [documentation](http://mongodb.github.io/node-mongodb-native/driver-articles/mongoclient.html#mongoclient-connect-options).\n\nSeveral objects are exposed by this plugin :\n\n- `db` : connection object to the database, if an array was provided for the configuration, it will be an array of connections in the same order\n- `lib` : mongodb library in case you need to use it\n- `ObjectID` : mongodb ObjectID constructor in case you need to use it\n\nUsage example :\n```js\nvar Hapi = require(\"hapi\");\nvar Boom = require(\"boom\");\n\nvar dbOpts = {\n    \"url\": \"mongodb://localhost:27017/test\",\n    \"settings\": {\n        \"db\": {\n            \"native_parser\": false\n        }\n    }\n};\n\nvar server = new Hapi.Server();\n\nserver.register({\n    register: require('hapi-mongodb'),\n    options: dbOpts\n}, function (err) {\n    if (err) {\n        console.error(err);\n        throw err;\n    }\n});\n\nserver.route( {\n    \"method\"  : \"GET\",\n    \"path\"    : \"/users/{id}\",\n    \"handler\" : usersHandler\n});\n\nfunction usersHandler(request, reply) {\n    var db = request.server.plugins['hapi-mongodb'].db;\n    var ObjectID = request.server.plugins['hapi-mongodb'].ObjectID;\n\n    db.collection('users').findOne({  \"_id\" : new ObjectID(request.params.id) }, function(err, result) {\n        if (err) return reply(Boom.internal('Internal MongoDB error', err));\n        reply(result);\n    });\n};\n\nserver.start(function() {\n    console.log(\"Server started at \" + server.info.uri);\n});\n```\n\nHuge thanks to [@dypsilon](https://github.com/dypsilon) for his help into the making of this plugin.\n",
  "readmeFilename": "README.md",
  "_id": "hapi-mongodb@3.0.0",
  "_from": "hapi-mongodb@"
}
